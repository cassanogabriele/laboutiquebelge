jQuery(document).ready((function(t){function e(e){t.ajax({url:"/wishlist_infos",method:"POST",data:{wishlistId:e},success:function(s){if(s.length>0){let a=t("<div>");s.forEach((function(s){var i=t('<div class="text-center wishlist-infos">');i.append('<button type="button" class="btn btn-danger btn-sm btn-icon delete-product float-right mt-4"><i class="fa fa-times text-white"></i></button>'),i.append('<img class="img-fluid img-thumbnail small-square-image mt-3" src="uploads/'+s.productImage+'" alt="'+s.productName+'">'),i.append("<h3>"+s.productName+"</h3>"),i.append('<p><span class="font-weight-bold">Prix :</span>'+s.productPrice+"</p>"),i.append('<p><span class="font-weight-bold">Description :</span>'+s.productDescription+"</p>"),i.append('<p><span class="font-weight-bold">Cat√©gorie :</span>'+s.categoryName+"</p>"),i.append('<input type="hidden" class="product-id-input" value="'+s.productId+'">'),i.append('<input type="hidden" class="wishlist-id-input" value="'+e+'">'),i.append('<input type="hidden" class="product-name-input" value="'+s.productName+'">'),a.append(i)})),t(".col-6").empty().append(a)}else t(".col-6").empty()},error:function(t,e,s){}})}t(document).on("click","li[data-wishlist-id]",(function(s){s.preventDefault(),e(t(this).data("wishlist-id"))})),t(".wishlist-delete-btn").on("click",(function(t){})),t("#wishlist-select").on("change",(function(e){let s=t("#wishlist-select option:selected").data("wishlist-id"),a=t("#product_id").val();t.ajax({url:"/wishlist/add/article/"+s+"/"+a,method:"POST",data:{wishlistId:s,productId:a},success:function(e){if(e.success)var s="alert-success";else s="alert-danger";let a=`<div class="alert ${s} mt-5 mb-5 text-center" style="position: relative;">${e.message}<button type="button" class="close" data-dismiss="alert" aria-label="Close" style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px;">&times;</button></div>`;t("#wishlist-message-container").html(a)},error:function(t,e,s){}})})),t(".wishlist-delete-btn").on("click",(function(e){let s=t(this).closest("li").data("wishlist-id"),a=t(this).closest("li").data("wishlist-name");t.ajax({url:"/wishlist/delete",method:"POST",data:{wishlistId:s,wishlistName:a},success:function(e){if(e.message){t.ajax({url:"/refreshWishlist",method:"GET",success:function(e){var s=t("#wishlist-list");if(s.empty(),e.length>0){let a=t("<form>").attr("method","POST");e.forEach((function(e){let s=t("<li>").addClass("d-flex justify-content-between align-items-center mb-2").attr("data-wishlist-id",e.id),i=t("<a>").attr("href","#").text(e.name),n=t("<button>").attr("type","button").addClass("btn btn-danger btn-sm btn-icon wishlist-delete-btn"),l=t("<i>").addClass("fas fa-trash");n.append(l),s.append(i,n),a.append(s)})),s.append(a);let i='<div class="container"><div class="d-flex align-items-center justify-content-center" style="height: 40vh;"><div class="alert alert-warning text-center" role="alert">Veuillez choisir une liste de souhait en cliquant sur son nom.</div></div></div>';t(".infos").html(i)}else{t("#wishlist-message-delete-container").addClass("alert alert-success alert-dismissible text-center").html(e.message+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');let s=t("<div>").addClass("container h-100").append(t("<h5>").addClass("card-title font-weight-bold text-center").text("Vos listes de souhaits")).append(t("<div>").addClass("row align-items-center h-100").append(t("<div>").addClass("col-12").append(t("<div>").addClass("card h-100 justify-content-center alert alert-danger text-center").append(t("<div>").text("vous n'avez pas de liste de souhaits.")))));t("#infos-wishlist").html(s)}},error:function(t,e,s){}});var s=t("<div>",{class:"alert alert-success alert-dismissible",role:"alert"});s.text(e.message);var a=t("<button>",{type:"button",class:"close","data-dismiss":"alert","aria-label":"Close"});a.html('<span aria-hidden="true">&times;</span>'),s.append(a),t("#confirmation-message").empty().append(s),t("#wishlist-count").text("("+e.wishlistItemCount+")")}},error:function(e,s,a){e.responseJSON&&e.responseJSON.error&&t("#confirmation-message").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.responseJSON.error+"</div>")}})})),t(document).on("click",".delete-product",(function(){let s=parseInt(t(this).siblings(".product-id-input").val()),a=parseInt(t(this).siblings(".wishlist-id-input").val()),i=t(this).siblings(".product-name-input").val();t.ajax({url:"/wishlist/delete_product",method:"POST",data:{productId:s,wishlistId:a,productName:i},success:function(s){s.success?(t(".wishlist-info").empty(),t("#message").addClass("alert alert-success alert-dismissible text-center").html(s.message+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),t.ajax({url:"/wishlist_infos",method:"POST",data:{wishlistId:a},success:function(s){s.length>0?e(a):t(".col-6").empty()},error:function(t,e,s){}})):(t(".wishlist-info").empty(),t("#message").addClass("alert alert-danger alert-dismissible text-center").html(s.message+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'))},error:function(t,e,s){}})}))}));